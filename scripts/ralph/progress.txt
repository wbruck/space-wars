# Ralph Progress Log
Started: Fri Feb 13 21:26:55 CST 2026

## Codebase Patterns
- Combat classes live in src/lib/game/combat.js, tests in src/lib/game/combat.test.js
- ShipComponent(name, maxHp) — has `destroyed` getter and `takeDamage(amount)` returning `{ destroyed: boolean }`
- Ship(name, components) — has `isDestroyed`, `getActiveComponents()`, `getComponent(name)`
- PlayerShip extends Ship with default components: Weapons (2 HP), Engines (2 HP), Bridge (2 HP)
- Player components have 2 HP each; enemy components have 1 HP each
- EnemyShip extends Ship with behavioral getters: canAttack, canFlee, isBridgeDestroyed
- Bridge destruction (isBridgeDestroyed) is the ONLY way to fully defeat an enemy — isDestroyed checks ALL components
- Behavioral getters return false if the named component doesn't exist (custom components edge case)

---

## 2026-02-13 21:28 - US-029
- Created src/lib/game/combat.js with ShipComponent, Ship, and PlayerShip classes
- ShipComponent: name, maxHp, currentHp, destroyed getter, takeDamage(amount) method
- Ship: name, components array, isDestroyed getter, getActiveComponents(), getComponent(name)
- PlayerShip: extends Ship with default Weapons/Engines/Bridge at 2 HP each, configurable via constructor
- Created src/lib/game/combat.test.js with 24 tests covering all classes
- Files changed: src/lib/game/combat.js, src/lib/game/combat.test.js
- **Learnings for future iterations:**
  - takeDamage returns { destroyed: boolean } indicating if THIS hit destroyed it (false if already dead)
  - PlayerShip constructor accepts optional components array to override defaults
  - Follow same test patterns as boardObjects.test.js (describe blocks per class, instanceof checks)
---

## 2026-02-13 21:30 - US-030
- Created EnemyShip class extending Ship in src/lib/game/combat.js
- Default components: Weapons (1 HP), Engines (1 HP), Bridge (1 HP) — configurable via constructor
- Behavioral getters: canAttack (Weapons alive), canFlee (Engines alive), isBridgeDestroyed (Bridge dead)
- Added 19 unit tests covering defaults, HP, instanceof, custom components, all getters, behavioral combos, and edge cases
- Files changed: src/lib/game/combat.js, src/lib/game/combat.test.js
- **Learnings for future iterations:**
  - isBridgeDestroyed is separate from isDestroyed — Bridge destruction = player victory even with other components alive
  - Behavioral getters safely return false when the named component doesn't exist (for custom ships)
  - EnemyShip pattern mirrors PlayerShip: constructor with optional components, defaults in constructor body
---
