## Codebase Patterns
- Vite + Svelte project (Svelte 5, Vite 7) with JS (not TS)
- Directory layout: src/lib/components/ (Svelte UI), src/lib/game/ (game logic), src/lib/utils/ (helpers)
- Use `npm run dev` for dev server, `npm run build` for production build
- PRD is at tasks/prd.json, progress log is at scripts/ralph/progress.txt
- Use `npm test` to run vitest unit tests
- Hex vertex grid: vertices are at hex corners, each has 3 direct neighbors (not 6). The 6 directions come from 3 axes × 2 directions. Rays skip gaps in the bipartite lattice.
- Vertex IDs are coordinate-based strings like "40,69.282" (roundCoord(x),roundCoord(y))

# Ralph Progress Log
Started: Fri Feb 13 08:49:32 CST 2026
---

## 2026-02-13 - US-001
- Scaffolded Vite + Svelte project using `npm create vite@latest` with svelte template
- Created directory structure: src/lib/components/, src/lib/game/, src/lib/utils/
- Updated App.svelte with placeholder "Game Time" page
- Updated index.html title and package.json name
- Files changed: index.html, package.json, src/App.svelte, src/main.js, src/app.css, src/lib/components/.gitkeep, src/lib/game/.gitkeep, src/lib/utils/.gitkeep, vite.config.js, svelte.config.js, jsconfig.json, .gitignore
- **Learnings for future iterations:**
  - `npm create vite@latest` won't scaffold into a non-empty directory; use a temp directory and copy files
  - Svelte 5 is the version installed (with runes syntax); Vite 7
  - No TypeScript in this project - using plain JS with jsconfig.json
  - Build output goes to dist/ (already in .gitignore)
---

## 2026-02-13 - US-002
- Implemented src/lib/game/hexGrid.js with generateGrid(radius, size) and hexCount(radius) exports
- Vertices generated from hex corners (flat-top, axial coords), deduplicated via coordinate rounding
- Adjacency map: each vertex has up to 3 neighbors (hex edge connections)
- Directional rays: 6 rays per vertex (0°-300° in 60° steps), rays skip over gaps in bipartite lattice
- 24 unit tests in hexGrid.test.js covering vertex generation, adjacency, rays, multiple radii
- Files changed: src/lib/game/hexGrid.js (new), src/lib/game/hexGrid.test.js (new), package.json (added vitest + test script)
- **Learnings for future iterations:**
  - Hex vertices form a bipartite graph: each vertex has 3 neighbors, not 6. The "6 directions" come from 3 lattice axes × 2 directions each.
  - Direction vectors at 0°, 60°, 120°, 180°, 240°, 300° with magnitude=size cover all possible edge directions, but each vertex only has edges in 3 of these 6 directions (alternating pattern).
  - Ray computation must skip gaps: stepping by direction vector may land on empty space; continue stepping and collect vertices that exist.
  - Coordinate deduplication via roundCoord (round to 3 decimal places) works well for eliminating floating-point duplicates.
  - The `distFromOrigin` bound in ray walking prevents infinite loops for edge vertices.
---
